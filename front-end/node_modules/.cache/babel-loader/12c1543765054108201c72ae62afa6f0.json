{"ast":null,"code":"var _jsxFileName = \"/Users/acaciano/Projects/2a/55PBXTest/front-end/src/pages/SignUp/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState } from 'react';\nimport { FiUser, FiMail, FiPhone, FiLock, FiArrowLeft } from 'react-icons/fi';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport api from '../../services/api';\nimport getValidationErrors from '../../utils/getValidationErrors';\nimport { Container, Content, AnimationContainer, Background } from './styles';\nimport logo from \"../../assets/logo.svg\";\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useToast } from '../../hooks/toast';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignUp = () => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const formRef = useRef(null);\n  const {\n    addToast\n  } = useToast();\n  const history = useHistory();\n  const handleSubmit = useCallback(async data => {\n    try {\n      var _formRef$current;\n\n      setLoading(true);\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n      const schema = Yup.object().shape({\n        name: Yup.string().required('Nome é obrigatório'),\n        email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail vãlido!'),\n        cellPhone: Yup.string().required('Celular é obrigatório'),\n        password: Yup.string().min(6, 'No mínimo 6 dígitos'),\n        confirmPassword: Yup.string().oneOf([Yup.ref('password'), null], 'A senha e confirmação de senha não conferem.')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await api.post('/v1/person/singUp', data);\n      history.push('/');\n      addToast({\n        type: 'success',\n        title: 'Cadastro realizado!',\n        description: 'Você já pode fazer seu logon no GoBarber!'\n      });\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        if (errors) (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      } else {\n        addToast({\n          type: 'error',\n          title: 'Erro no cadastro',\n          description: 'Ocorreu um erro ao fazer seu cadastro, tente novamente!'\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [addToast, history]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Content, {\n      children: /*#__PURE__*/_jsxDEV(AnimationContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"GoBarber\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          ref: formRef,\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Fa\\xE7a seu cadastro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"name\",\n            icon: FiUser,\n            type: \"text\",\n            placeholder: \"Nome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            icon: FiMail,\n            type: \"text\",\n            placeholder: \"E-mail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"cellPhone\",\n            icon: FiPhone,\n            type: \"text\",\n            mask: \"cellPhone\",\n            placeholder: \"Celular\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            icon: FiLock,\n            type: \"password\",\n            placeholder: \"Senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"confirmPassword\",\n            icon: FiLock,\n            type: \"password\",\n            placeholder: \"Confirmar Senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            loading: loading,\n            type: \"submit\",\n            children: \"Cadastrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [/*#__PURE__*/_jsxDEV(FiArrowLeft, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 25\n          }, this), \"Voltar para logon\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignUp, \"BpbLD0FWrc1wVhBYfokqZI5nhCs=\", false, function () {\n  return [useToast, useHistory];\n});\n\n_c = SignUp;\nexport default SignUp;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignUp\");","map":{"version":3,"sources":["/Users/acaciano/Projects/2a/55PBXTest/front-end/src/pages/SignUp/index.tsx"],"names":["React","useCallback","useRef","useState","FiUser","FiMail","FiPhone","FiLock","FiArrowLeft","Form","Yup","api","getValidationErrors","Container","Content","AnimationContainer","Background","Input","Button","Link","useHistory","useToast","SignUp","loading","setLoading","formRef","addToast","history","handleSubmit","data","current","setErrors","schema","object","shape","name","string","required","email","cellPhone","password","min","confirmPassword","oneOf","ref","validate","abortEarly","post","push","type","title","description","err","ValidationError","errors","logo"],"mappings":"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","sourcesContent":["import React, { useCallback, useRef, useState } from 'react';\nimport { FiUser, FiMail, FiPhone, FiLock, FiArrowLeft } from 'react-icons/fi'\nimport { FormHandles } from '@unform/core';\nimport { Form } from '@unform/web';\n\nimport * as Yup from 'yup';\n\nimport api from '../../services/api';\n\nimport getValidationErrors from '../../utils/getValidationErrors';\n\nimport { Container, Content, AnimationContainer, Background } from './styles'\nimport logo from '../../assets/logo.svg';\n\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\nimport { Link, useHistory } from 'react-router-dom';\nimport { useToast } from '../../hooks/toast';\n\ninterface SignUpFormData {\n    name: string,\n    email: string,\n    cellPhone: string,\n    password: string,\n    confirmPassword: string,\n}\n\nconst SignUp: React.FC = () => {\n\n    const [loading, setLoading] = useState(false);\n    const formRef = useRef<FormHandles>(null);\n\n    const { addToast } = useToast();\n\n    const history = useHistory();\n\n    const handleSubmit = useCallback(async (data: SignUpFormData) => {\n        try {\n            setLoading(true);\n            formRef.current?.setErrors({});\n\n            const schema = Yup.object().shape({\n                name: Yup.string().required('Nome é obrigatório'),\n                email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail vãlido!'),\n                cellPhone: Yup.string().required('Celular é obrigatório'),\n                password: Yup.string().min(6, 'No mínimo 6 dígitos'),\n                confirmPassword: Yup.string().oneOf(\n                    [Yup.ref('password'), null], 'A senha e confirmação de senha não conferem.'\n                ),\n            });\n\n            await schema.validate(data, {\n                abortEarly: false\n            });\n\n            await api.post('/v1/person/singUp', data);\n\n            history.push('/');\n\n            addToast({\n                type: 'success',\n                title: 'Cadastro realizado!',\n                description: 'Você já pode fazer seu logon no GoBarber!'\n            });\n        } catch (err) {\n\n            if (err instanceof Yup.ValidationError) {\n                const errors = getValidationErrors(err);\n\n                if (errors) formRef.current?.setErrors(errors);\n\n                return;\n            } else {\n                addToast({\n                    type: 'error',\n                    title: 'Erro no cadastro',\n                    description: 'Ocorreu um erro ao fazer seu cadastro, tente novamente!'\n                });\n            }\n        } finally {\n            setLoading(false);\n        }\n    }, [addToast, history]);\n\n    return (\n        <Container>\n            <Background />\n            <Content>\n                <AnimationContainer>\n                    <img src={logo} alt=\"GoBarber\" />\n\n                    <Form ref={formRef} onSubmit={handleSubmit}>\n                        <h1>Faça seu cadastro</h1>\n\n                        <Input name=\"name\" icon={FiUser} type=\"text\" placeholder=\"Nome\" />\n                        <Input name=\"email\" icon={FiMail} type=\"text\" placeholder=\"E-mail\" />\n                        <Input name=\"cellPhone\" icon={FiPhone} type=\"text\" mask=\"cellPhone\" placeholder=\"Celular\" />\n                        <Input name=\"password\" icon={FiLock} type=\"password\" placeholder=\"Senha\" />\n                        <Input name=\"confirmPassword\" icon={FiLock} type=\"password\" placeholder=\"Confirmar Senha\" />\n\n                        <Button loading={loading} type=\"submit\">Cadastrar</Button>\n                    </Form>\n\n                    <Link to=\"/\">\n                        <FiArrowLeft />\n                        Voltar para logon\n                    </Link>\n                </AnimationContainer>\n            </Content>\n        </Container>\n    )\n\n};\n\nexport default SignUp;"]},"metadata":{},"sourceType":"module"}