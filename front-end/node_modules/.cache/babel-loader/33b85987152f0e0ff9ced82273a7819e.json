{"ast":null,"code":"var _jsxFileName = \"/Users/acaciano/Projects/2a/55PBXTest/front-end/src/pages/Signln/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useRef, useState } from 'react';\nimport { FiLogIn, FiMail, FiLock } from 'react-icons/fi';\nimport { Form } from '@unform/web';\nimport * as Yup from 'yup';\nimport getValidationErrors from '../../utils/getValidationErrors';\nimport { Container, Content, AnimationContainer, Background } from './styles';\nimport logo from \"../../assets/logo.svg\";\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\nimport { Link, useHistory } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignIn = () => {\n  _s();\n\n  const [loading, setLoading] = useState(false);\n  const formRef = useRef(null);\n  const {\n    user,\n    signIn\n  } = useAuth();\n  const {\n    addToast\n  } = useToast();\n  const history = useHistory();\n  const handleSubmit = useCallback(async data => {\n    try {\n      var _formRef$current;\n\n      setLoading(true);\n      (_formRef$current = formRef.current) === null || _formRef$current === void 0 ? void 0 : _formRef$current.setErrors({});\n      const schema = Yup.object().shape({\n        email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail vãlido!'),\n        password: Yup.string().required('Senha obrigatório')\n      });\n      await schema.validate(data, {\n        abortEarly: false\n      });\n      await signIn({\n        email: data.email,\n        password: data.password\n      });\n      history.push('/dashboard');\n    } catch (err) {\n      if (err instanceof Yup.ValidationError) {\n        var _formRef$current2;\n\n        const errors = getValidationErrors(err);\n        if (errors) (_formRef$current2 = formRef.current) === null || _formRef$current2 === void 0 ? void 0 : _formRef$current2.setErrors(errors);\n        return;\n      } else {\n        addToast({\n          type: 'error',\n          title: 'Erro na autenticação',\n          description: 'Ocorreu um erro ao fazer login, cheque suas credenciais.'\n        });\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [signIn, addToast]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Content, {\n      children: /*#__PURE__*/_jsxDEV(AnimationContainer, {\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: logo,\n          alt: \"GoBarber\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          ref: formRef,\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: \"Fa\\xE7a seu logon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"email\",\n            icon: FiMail,\n            type: \"text\",\n            placeholder: \"E-mail\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Input, {\n            name: \"password\",\n            icon: FiLock,\n            type: \"password\",\n            placeholder: \"Senha\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            loading: loading,\n            type: \"submit\",\n            children: \"Entrar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/forgot-password\",\n            children: \" Esqueci minha senha \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"criar-conta\",\n          children: [/*#__PURE__*/_jsxDEV(FiLogIn, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }, this), \"Criar conta\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 9\n  }, this);\n};\n\n_s(SignIn, \"BLUL0I30DIgOBAKK3/EzenSPy0o=\", false, function () {\n  return [useAuth, useToast, useHistory];\n});\n\n_c = SignIn;\nexport default SignIn;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"sources":["/Users/acaciano/Projects/2a/55PBXTest/front-end/src/pages/Signln/index.tsx"],"names":["React","useCallback","useRef","useState","FiLogIn","FiMail","FiLock","Form","Yup","getValidationErrors","Container","Content","AnimationContainer","Background","Input","Button","useAuth","useToast","Link","useHistory","SignIn","loading","setLoading","formRef","user","signIn","addToast","history","handleSubmit","data","current","setErrors","schema","object","shape","email","string","required","password","validate","abortEarly","push","err","ValidationError","errors","type","title","description","logo"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,MAA7B,EAAiDC,QAAjD,QAAiE,OAAjE;AACA,SAASC,OAAT,EAAkBC,MAAlB,EAA0BC,MAA1B,QAAwC,gBAAxC;AACA,SAASC,IAAT,QAAqB,aAArB;AAGA,OAAO,KAAKC,GAAZ,MAAqB,KAArB;AAEA,OAAOC,mBAAP,MAAgC,iCAAhC;AAEA,SAASC,SAAT,EAAoBC,OAApB,EAA6BC,kBAA7B,EAAiDC,UAAjD,QAAmE,UAAnE;;AAGA,OAAOC,KAAP,MAAkB,wBAAlB;AACA,OAAOC,MAAP,MAAmB,yBAAnB;AAEA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,IAAT,EAAeC,UAAf,QAAiC,kBAAjC;;;AAOA,MAAMC,MAAgB,GAAG,MAAM;AAAA;;AAE3B,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAMoB,OAAO,GAAGrB,MAAM,CAAc,IAAd,CAAtB;AACA,QAAM;AAAEsB,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAmBT,OAAO,EAAhC;AACA,QAAM;AAAEU,IAAAA;AAAF,MAAeT,QAAQ,EAA7B;AAEA,QAAMU,OAAO,GAAGR,UAAU,EAA1B;AAEA,QAAMS,YAAY,GAAG3B,WAAW,CAAC,MAAO4B,IAAP,IAAgC;AAC7D,QAAI;AAAA;;AACAP,MAAAA,UAAU,CAAC,IAAD,CAAV;AACA,0BAAAC,OAAO,CAACO,OAAR,sEAAiBC,SAAjB,CAA2B,EAA3B;AAEA,YAAMC,MAAM,GAAGxB,GAAG,CAACyB,MAAJ,GAAaC,KAAb,CAAmB;AAC9BC,QAAAA,KAAK,EAAE3B,GAAG,CAAC4B,MAAJ,GAAaC,QAAb,CAAsB,sBAAtB,EAA8CF,KAA9C,CAAoD,0BAApD,CADuB;AAE9BG,QAAAA,QAAQ,EAAE9B,GAAG,CAAC4B,MAAJ,GAAaC,QAAb,CAAsB,mBAAtB;AAFoB,OAAnB,CAAf;AAKA,YAAML,MAAM,CAACO,QAAP,CAAgBV,IAAhB,EAAsB;AACxBW,QAAAA,UAAU,EAAE;AADY,OAAtB,CAAN;AAIA,YAAMf,MAAM,CAAC;AACTU,QAAAA,KAAK,EAAEN,IAAI,CAACM,KADH;AAETG,QAAAA,QAAQ,EAAET,IAAI,CAACS;AAFN,OAAD,CAAZ;AAKAX,MAAAA,OAAO,CAACc,IAAR,CAAa,YAAb;AAEH,KApBD,CAoBE,OAAOC,GAAP,EAAY;AAEV,UAAIA,GAAG,YAAYlC,GAAG,CAACmC,eAAvB,EAAwC;AAAA;;AACpC,cAAMC,MAAM,GAAGnC,mBAAmB,CAACiC,GAAD,CAAlC;AAEA,YAAIE,MAAJ,EAAY,qBAAArB,OAAO,CAACO,OAAR,wEAAiBC,SAAjB,CAA2Ba,MAA3B;AAEZ;AACH,OAND,MAMO;AACHlB,QAAAA,QAAQ,CAAC;AACLmB,UAAAA,IAAI,EAAE,OADD;AAELC,UAAAA,KAAK,EAAE,sBAFF;AAGLC,UAAAA,WAAW,EAAE;AAHR,SAAD,CAAR;AAKH;AACJ,KAnCD,SAmCU;AACNzB,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,GAvC+B,EAuC7B,CAACG,MAAD,EAASC,QAAT,CAvC6B,CAAhC;AAyCA,sBACI,QAAC,SAAD;AAAA,4BAEI,QAAC,OAAD;AAAA,6BACI,QAAC,kBAAD;AAAA,gCACI;AAAK,UAAA,GAAG,EAAEsB,IAAV;AAAgB,UAAA,GAAG,EAAC;AAApB;AAAA;AAAA;AAAA;AAAA,gBADJ,eAGI,QAAC,IAAD;AAAM,UAAA,GAAG,EAAEzB,OAAX;AAAoB,UAAA,QAAQ,EAAEK,YAA9B;AAAA,kCACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAGI,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,OAAZ;AAAoB,YAAA,IAAI,EAAEvB,MAA1B;AAAkC,YAAA,IAAI,EAAC,MAAvC;AAA8C,YAAA,WAAW,EAAC;AAA1D;AAAA;AAAA;AAAA;AAAA,kBAHJ,eAII,QAAC,KAAD;AAAO,YAAA,IAAI,EAAC,UAAZ;AAAuB,YAAA,IAAI,EAAEC,MAA7B;AAAqC,YAAA,IAAI,EAAC,UAA1C;AAAqD,YAAA,WAAW,EAAC;AAAjE;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAMI,QAAC,MAAD;AAAQ,YAAA,OAAO,EAAEe,OAAjB;AAA0B,YAAA,IAAI,EAAC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBANJ,eAOI,QAAC,IAAD;AAAM,YAAA,EAAE,EAAC,kBAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAaI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,aAAT;AAAA,kCACI,QAAC,OAAD;AAAA;AAAA;AAAA;AAAA,kBADJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAbJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAFJ,eAuBI,QAAC,UAAD;AAAA;AAAA;AAAA;AAAA,YAvBJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AA2BH,CA7ED;;GAAMD,M;UAIuBJ,O,EACJC,Q,EAELE,U;;;KAPdC,M;AA+EN,eAAeA,MAAf","sourcesContent":["import React, { useCallback, useRef, useContext, useState } from 'react';\nimport { FiLogIn, FiMail, FiLock } from 'react-icons/fi'\nimport { Form } from '@unform/web';\nimport { FormHandles } from '@unform/core';\n\nimport * as Yup from 'yup';\n\nimport getValidationErrors from '../../utils/getValidationErrors';\n\nimport { Container, Content, AnimationContainer, Background } from './styles'\nimport logo from '../../assets/logo.svg';\n\nimport Input from '../../components/Input';\nimport Button from '../../components/Button';\n\nimport { useAuth } from '../../hooks/auth';\nimport { useToast } from '../../hooks/toast';\nimport { Link, useHistory } from 'react-router-dom';\n\ninterface SignInFormData {\n    email: string,\n    password: string\n}\n\nconst SignIn: React.FC = () => {\n\n    const [loading, setLoading] = useState(false);\n    const formRef = useRef<FormHandles>(null);\n    const { user, signIn } = useAuth();\n    const { addToast } = useToast();\n\n    const history = useHistory();\n\n    const handleSubmit = useCallback(async (data: SignInFormData) => {\n        try {\n            setLoading(true);\n            formRef.current?.setErrors({});\n\n            const schema = Yup.object().shape({\n                email: Yup.string().required('E-mail é obrigatório').email('Digite um e-mail vãlido!'),\n                password: Yup.string().required('Senha obrigatório'),\n            });\n\n            await schema.validate(data, {\n                abortEarly: false\n            });\n\n            await signIn({\n                email: data.email,\n                password: data.password\n            });\n\n            history.push('/dashboard');\n\n        } catch (err) {\n\n            if (err instanceof Yup.ValidationError) {\n                const errors = getValidationErrors(err);\n\n                if (errors) formRef.current?.setErrors(errors);\n\n                return;\n            } else {\n                addToast({\n                    type: 'error',\n                    title: 'Erro na autenticação',\n                    description: 'Ocorreu um erro ao fazer login, cheque suas credenciais.'\n                });\n            }\n        } finally {\n            setLoading(false);\n        }\n    }, [signIn, addToast]);\n\n    return (\n        <Container>\n\n            <Content>\n                <AnimationContainer>\n                    <img src={logo} alt=\"GoBarber\" />\n\n                    <Form ref={formRef} onSubmit={handleSubmit}>\n                        <h1>Faça seu logon</h1>\n\n                        <Input name=\"email\" icon={FiMail} type=\"text\" placeholder=\"E-mail\" />\n                        <Input name=\"password\" icon={FiLock} type=\"password\" placeholder=\"Senha\" />\n\n                        <Button loading={loading} type=\"submit\">Entrar</Button>\n                        <Link to=\"/forgot-password\"> Esqueci minha senha </Link>\n                    </Form>\n\n                    <Link to=\"criar-conta\">\n                        <FiLogIn />\n                    Criar conta\n                </Link>\n                </AnimationContainer>\n            </Content>\n\n            <Background />\n        </Container>\n    );\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}